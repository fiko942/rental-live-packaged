'use strict';const _0x2225c5=_0x3bb1;function _0x4310(){const _0x5297dc=['default','env','stringify','utf8','POST','application/json','bytesToMB','networkUsage','9526188ToJgmu','between','__createBinding','diskTotal','push','down','used','node-fetch','getNetworkUsage','totalNetworkUsageBytes','forEach','unix','performance','performanceReports','recordPerformanceOnCentreData','totalmem','writable','hour','8XDrWxg','percentageUsedMemory','networkStats','json','Asia/Jakarta','username','reduce','__importDefault','cpu','toFixed','CENTRE_URL','endsWith','__setModuleDefault','then','3948395ALhkMX','length','configurable','totalMemory','error','parseNetworkData','cores','2213680EDpCSA','database','percentageUsedCpu','days','usedCpu','prototype','userInfo','17208bmfqDx','__esModule','Recorded\x20performance\x20on\x20centre\x20data','tx_bytes','8920500EsxyXH','41593pNsFFq','create','sequelize','currentLoad','DESC','usedMemory','done','message','fsSize','release','defineProperty','value','checkNetworkUsage','freemem','5427lMYCYQ','systeminformation','performanceData','__awaiter','next','split','type','hasOwnProperty','destroy','diskUsage','/compute/recordPerformance','call','PUBLIC_IP','getOwnPropertyDescriptor','6xtltTX','apply','rx_bytes','1499811gxBANw','subtract'];_0x4310=function(){return _0x5297dc;};return _0x4310();}(function(_0x37721b,_0xc265aa){const _0x4072bf=_0x3bb1,_0x1d6a6c=_0x37721b();while(!![]){try{const _0xf52620=parseInt(_0x4072bf(0x159))/0x1+-parseInt(_0x4072bf(0x14d))/0x2+parseInt(_0x4072bf(0x178))/0x3*(-parseInt(_0x4072bf(0x194))/0x4)+-parseInt(_0x4072bf(0x146))/0x5*(parseInt(_0x4072bf(0x175))/0x6)+parseInt(_0x4072bf(0x182))/0x7+parseInt(_0x4072bf(0x154))/0x8*(parseInt(_0x4072bf(0x167))/0x9)+parseInt(_0x4072bf(0x158))/0xa;if(_0xf52620===_0xc265aa)break;else _0x1d6a6c['push'](_0x1d6a6c['shift']());}catch(_0x38cf70){_0x1d6a6c['push'](_0x1d6a6c['shift']());}}}(_0x4310,0xa9b93));function _0x3bb1(_0x4073b8,_0x4e7301){const _0x431075=_0x4310();return _0x3bb1=function(_0x3bb109,_0x204a05){_0x3bb109=_0x3bb109-0x13c;let _0x36db91=_0x431075[_0x3bb109];return _0x36db91;},_0x3bb1(_0x4073b8,_0x4e7301);}var __createBinding=this&&this[_0x2225c5(0x184)]||(Object[_0x2225c5(0x15a)]?function(_0x29df6e,_0xe1cb92,_0x25cee9,_0x181322){const _0x3af3fb=_0x2225c5;if(_0x181322===undefined)_0x181322=_0x25cee9;var _0x346d04=Object[_0x3af3fb(0x174)](_0xe1cb92,_0x25cee9);(!_0x346d04||('get'in _0x346d04?!_0xe1cb92['__esModule']:_0x346d04[_0x3af3fb(0x192)]||_0x346d04[_0x3af3fb(0x148)]))&&(_0x346d04={'enumerable':!![],'get':function(){return _0xe1cb92[_0x25cee9];}}),Object[_0x3af3fb(0x163)](_0x29df6e,_0x181322,_0x346d04);}:function(_0x397d07,_0x5d83d8,_0x50a765,_0x5e8407){if(_0x5e8407===undefined)_0x5e8407=_0x50a765;_0x397d07[_0x5e8407]=_0x5d83d8[_0x50a765];}),__setModuleDefault=this&&this[_0x2225c5(0x144)]||(Object[_0x2225c5(0x15a)]?function(_0x2c3a5b,_0x19ca29){const _0x595dc8=_0x2225c5;Object[_0x595dc8(0x163)](_0x2c3a5b,_0x595dc8(0x17a),{'enumerable':!![],'value':_0x19ca29});}:function(_0x311808,_0x138f81){const _0x2ccea5=_0x2225c5;_0x311808[_0x2ccea5(0x17a)]=_0x138f81;}),__importStar=this&&this['__importStar']||function(_0xf43c5){const _0x41ff15=_0x2225c5;if(_0xf43c5&&_0xf43c5[_0x41ff15(0x155)])return _0xf43c5;var _0x582fe7={};if(_0xf43c5!=null){for(var _0x3f1e46 in _0xf43c5)if(_0x3f1e46!=='default'&&Object[_0x41ff15(0x152)][_0x41ff15(0x16e)][_0x41ff15(0x172)](_0xf43c5,_0x3f1e46))__createBinding(_0x582fe7,_0xf43c5,_0x3f1e46);}return __setModuleDefault(_0x582fe7,_0xf43c5),_0x582fe7;},__awaiter=this&&this[_0x2225c5(0x16a)]||function(_0x30392c,_0x3e517e,_0x4715ed,_0x15cc7a){function _0x55d185(_0x4796fb){return _0x4796fb instanceof _0x4715ed?_0x4796fb:new _0x4715ed(function(_0xd71b7c){_0xd71b7c(_0x4796fb);});}return new(_0x4715ed||(_0x4715ed=Promise))(function(_0x3aa48a,_0xa6a504){const _0x3c500d=_0x3bb1;function _0x576383(_0x617447){const _0x1d15bc=_0x3bb1;try{_0x446b91(_0x15cc7a[_0x1d15bc(0x16b)](_0x617447));}catch(_0xbf6c72){_0xa6a504(_0xbf6c72);}}function _0x1e52ad(_0x46086a){try{_0x446b91(_0x15cc7a['throw'](_0x46086a));}catch(_0x41a379){_0xa6a504(_0x41a379);}}function _0x446b91(_0xfaa3d2){const _0x2d67e7=_0x3bb1;_0xfaa3d2[_0x2d67e7(0x15f)]?_0x3aa48a(_0xfaa3d2[_0x2d67e7(0x164)]):_0x55d185(_0xfaa3d2['value'])[_0x2d67e7(0x145)](_0x576383,_0x1e52ad);}_0x446b91((_0x15cc7a=_0x15cc7a[_0x3c500d(0x176)](_0x30392c,_0x3e517e||[]))['next']());});},__importDefault=this&&this[_0x2225c5(0x13f)]||function(_0x240ee7){const _0x35b5a0=_0x2225c5;return _0x240ee7&&_0x240ee7[_0x35b5a0(0x155)]?_0x240ee7:{'default':_0x240ee7};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const os=__importStar(require('os')),systeminformation_1=__importDefault(require(_0x2225c5(0x168))),moment_timezone_1=__importDefault(require('moment-timezone')),sequelize_1=require(_0x2225c5(0x15b)),node_fetch_1=__importDefault(require(_0x2225c5(0x189))),fs_1=__importDefault(require('fs'));class Device{[_0x2225c5(0x169)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x471edd=_0x3bb1,_0x104d27=yield systeminformation_1[_0x471edd(0x17a)]['currentLoad'](),_0x51da48=_0x104d27['cpus'][_0x471edd(0x147)]*0x64,_0x339294=_0x104d27[_0x471edd(0x15c)],_0x344d44=_0x104d27[_0x471edd(0x15c)],_0x76198a=os[_0x471edd(0x191)](),_0x5bd58e=os[_0x471edd(0x166)](),_0xa7b6ae=_0x76198a-_0x5bd58e,_0x32f194=_0xa7b6ae/_0x76198a*0x64,_0x318837=yield systeminformation_1[_0x471edd(0x17a)][_0x471edd(0x196)](),_0x216a1d=_0x318837['reduce']((_0x3801d1,_0x406884)=>_0x3801d1+_0x406884[_0x471edd(0x157)]+_0x406884[_0x471edd(0x177)],0x0),_0x2ea5a6=os[_0x471edd(0x16d)]()+'\x20'+os[_0x471edd(0x162)](),_0x54ef06=os[_0x471edd(0x153)]()[_0x471edd(0x13d)],_0x42ffcb=yield systeminformation_1['default'][_0x471edd(0x161)](),_0x199952=_0x42ffcb[_0x471edd(0x13e)]((_0x41f730,_0x2c319e)=>_0x41f730+_0x2c319e[_0x471edd(0x188)],0x0),_0x62f6ef=_0x42ffcb[_0x471edd(0x13e)]((_0xfb65c4,_0x1b54a3)=>_0xfb65c4+_0x1b54a3['size'],0x0);return{'totalCpu':_0x51da48,'usedCpu':_0x339294,'percentageUsedCpu':_0x344d44,'totalMemory':_0x76198a,'usedMemory':_0xa7b6ae,'percentageUsedMemory':_0x32f194,'totalNetworkUsageBytes':_0x216a1d,'osName':_0x2ea5a6,'osUserName':_0x54ef06,'diskUsage':_0x199952,'diskTotal':_0x62f6ef};});}[_0x2225c5(0x18f)](_0x1b02c9){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x42e5ad=_0x3bb1,_0x1b6136=(0x0,moment_timezone_1['default'])()['tz']('Asia/Jakarta')[_0x42e5ad(0x179)](0x3,_0x42e5ad(0x193))['unix'](),_0x141c8f=(0x0,moment_timezone_1[_0x42e5ad(0x17a)])()['tz'](_0x42e5ad(0x13c))[_0x42e5ad(0x18d)](),_0x1c7e4d=yield this['database']['performance']['findAll']({'where':{'at':{[sequelize_1['Op'][_0x42e5ad(0x183)]]:[_0x1b6136,_0x141c8f]}},'order':[['at',_0x42e5ad(0x15d)]]});let _0x485c07=[];for(const _0x363774 of _0x1c7e4d){_0x485c07[_0x42e5ad(0x186)]({'usedCpu':_0x363774[_0x42e5ad(0x151)],'memory':{'used':_0x363774['usedMemory'],'total':_0x363774[_0x42e5ad(0x149)],'percentage':_0x363774[_0x42e5ad(0x195)]},'networkUsage':_0x363774[_0x42e5ad(0x181)],'disk':{'total':_0x363774[_0x42e5ad(0x185)],'usage':_0x363774[_0x42e5ad(0x170)],'percentage':_0x363774['diskUsage']/_0x363774[_0x42e5ad(0x185)]*0x64},'at':_0x363774['at']});}return _0x485c07;});}['recordPerformance'](_0x5e13ac){return __awaiter(this,arguments,void 0x0,function*({every:_0x4950b0}){const _0x1072f8=_0x3bb1;while(!![]){const _0x1e83c5=yield this[_0x1072f8(0x169)](),_0x5b041b=(0x0,moment_timezone_1[_0x1072f8(0x17a)])()['tz']('Asia/Jakarta')[_0x1072f8(0x18d)]();yield this[_0x1072f8(0x14e)][_0x1072f8(0x18e)][_0x1072f8(0x15a)]({'at':_0x5b041b,'usedCpu':_0x1e83c5[_0x1072f8(0x151)],'totalMemory':_0x1e83c5[_0x1072f8(0x149)],'usedMemory':_0x1e83c5[_0x1072f8(0x15e)],'percentageUsedMemory':_0x1e83c5[_0x1072f8(0x195)],'networkUsage':_0x1e83c5[_0x1072f8(0x18b)],'diskUsage':_0x1e83c5[_0x1072f8(0x170)],'diskTotal':_0x1e83c5[_0x1072f8(0x185)]});const _0x3f8875=(0x0,moment_timezone_1['default'])()['tz'](_0x1072f8(0x13c))[_0x1072f8(0x179)](0x5,_0x1072f8(0x150))['unix']();yield this[_0x1072f8(0x14e)][_0x1072f8(0x18e)][_0x1072f8(0x16f)]({'where':{'at':{[sequelize_1['Op']['lt']]:_0x3f8875}}}),yield new Promise(_0x5085ce=>setTimeout(_0x5085ce,_0x4950b0));}});}constructor({database:_0x358876}){const _0x273fc8=_0x2225c5;this[_0x273fc8(0x14e)]=_0x358876,this['recordPerformance']({'every':0xea60}),this[_0x273fc8(0x190)]({'every':0x5});}[_0x2225c5(0x180)](_0x189aff){const _0x324f35=_0x2225c5;return parseFloat((_0x189aff/(0x400*0x400))[_0x324f35(0x141)](0x2));}['recordPerformanceOnCentreData'](_0x1d23d0){return __awaiter(this,arguments,void 0x0,function*({every:_0x323cff}){const _0x382081=_0x3bb1;while(!![]){try{const _0x4551c6=(yield systeminformation_1[_0x382081(0x17a)][_0x382081(0x140)]())[_0x382081(0x14c)],_0x5c8e08=yield this['performanceData'](),_0x1726ba=yield this[_0x382081(0x18a)](),_0x52bf52={'ip':process[_0x382081(0x17b)][_0x382081(0x173)],'cpuCores':_0x4551c6,'cpuPercentUsage':_0x5c8e08[_0x382081(0x14f)],'totalStorage':this[_0x382081(0x180)](_0x5c8e08[_0x382081(0x185)]),'usedStorage':this[_0x382081(0x180)](_0x5c8e08['diskUsage']),'totalMemory':this[_0x382081(0x180)](_0x5c8e08[_0x382081(0x149)]),'usedMemory':this['bytesToMB'](_0x5c8e08[_0x382081(0x15e)]),'uploadNetwork':_0x1726ba['up'],'downloadNetwork':_0x1726ba[_0x382081(0x187)]},_0x183da0=process[_0x382081(0x17b)][_0x382081(0x142)]+_0x382081(0x171),_0x3d6ceb=yield(0x0,node_fetch_1[_0x382081(0x17a)])(_0x183da0,{'headers':{'Content-Type':_0x382081(0x17f)},'method':_0x382081(0x17e),'body':JSON[_0x382081(0x17c)](_0x52bf52)}),_0x519814=yield _0x3d6ceb[_0x382081(0x197)]();console['log'](_0x519814),console['log'](_0x382081(0x156));}catch(_0x52c57b){console[_0x382081(0x14a)](_0x52c57b[_0x382081(0x160)]||_0x52c57b);}yield new Promise(_0x13b5ed=>setTimeout(_0x13b5ed,_0x323cff*0x3e8));}});}[_0x2225c5(0x14b)](_0x32a078){const _0x114bc2=_0x2225c5,_0x3392c5=_0x32a078['split']('\x0a');let _0x4014c6=0x0,_0x1388c0=0x0;return _0x3392c5[_0x114bc2(0x18c)](_0x176620=>{const _0x3e5564=_0x114bc2,_0xfb08dd=_0x176620['trim']()[_0x3e5564(0x16c)](/\s+/);_0xfb08dd[0x0][_0x3e5564(0x143)](':')&&(_0x4014c6+=parseInt(_0xfb08dd[0x1],0xa),_0x1388c0+=parseInt(_0xfb08dd[0x9],0xa));}),{'rx':_0x4014c6,'tx':_0x1388c0};}[_0x2225c5(0x165)](){const _0x2ffdcb=_0x2225c5;let _0x3a2b19={'rx':0x0,'tx':0x0};return fs_1['default']['readFile']('/proc/net/dev',_0x2ffdcb(0x17d),(_0xef05ed,_0x1dc741)=>{const _0x37a8f8=_0x2ffdcb;if(_0xef05ed){console[_0x37a8f8(0x14a)]('Error\x20reading\x20/proc/net/dev:',_0xef05ed);return;}const _0x59d439=this['parseNetworkData'](_0x1dc741);if(_0x3a2b19['rx']!==0x0&&_0x3a2b19['tx']!==0x0){const _0x4ee630=_0x59d439['rx']-_0x3a2b19['rx'],_0x30242b=_0x59d439['tx']-_0x3a2b19['tx'];_0x3a2b19['rx']=_0x4ee630,_0x3a2b19['tx']=_0x30242b;}_0x3a2b19['rx']+=_0x59d439['rx'],_0x3a2b19['tx']+=_0x59d439['tx'];}),_0x3a2b19;}['getNetworkUsage'](){return __awaiter(this,void 0x0,void 0x0,function*(){return{'up':0x0,'down':0x0};});}}exports['default']=Device;