'use strict';const _0x32fbaa=_0x1a41;(function(_0xc2e23c,_0xdbedf7){const _0x2c3c5e=_0x1a41,_0x5c741f=_0xc2e23c();while(!![]){try{const _0x29f2d0=-parseInt(_0x2c3c5e(0x126))/0x1*(parseInt(_0x2c3c5e(0x108))/0x2)+-parseInt(_0x2c3c5e(0x13e))/0x3*(parseInt(_0x2c3c5e(0x121))/0x4)+-parseInt(_0x2c3c5e(0x113))/0x5*(parseInt(_0x2c3c5e(0x13b))/0x6)+-parseInt(_0x2c3c5e(0xd2))/0x7+-parseInt(_0x2c3c5e(0x128))/0x8*(parseInt(_0x2c3c5e(0x151))/0x9)+-parseInt(_0x2c3c5e(0x13f))/0xa*(parseInt(_0x2c3c5e(0x105))/0xb)+parseInt(_0x2c3c5e(0x129))/0xc*(parseInt(_0x2c3c5e(0xec))/0xd);if(_0x29f2d0===_0xdbedf7)break;else _0x5c741f['push'](_0x5c741f['shift']());}catch(_0x13d8c0){_0x5c741f['push'](_0x5c741f['shift']());}}}(_0x2098,0x932a7));var __awaiter=this&&this[_0x32fbaa(0x14e)]||function(_0x4393f8,_0xf71a9a,_0x3ace32,_0x11b55b){function _0x370e68(_0x5eecbd){return _0x5eecbd instanceof _0x3ace32?_0x5eecbd:new _0x3ace32(function(_0x9f7ae3){_0x9f7ae3(_0x5eecbd);});}return new(_0x3ace32||(_0x3ace32=Promise))(function(_0x21f3c6,_0x40b2b0){const _0xfa7607=_0x1a41;function _0x4933b5(_0x121890){const _0x613c17=_0x1a41;try{_0x2b7d47(_0x11b55b[_0x613c17(0x148)](_0x121890));}catch(_0x2f6c1e){_0x40b2b0(_0x2f6c1e);}}function _0x298a46(_0x5eea23){const _0x52d98b=_0x1a41;try{_0x2b7d47(_0x11b55b[_0x52d98b(0xd0)](_0x5eea23));}catch(_0x3c9874){_0x40b2b0(_0x3c9874);}}function _0x2b7d47(_0x1ee4b6){const _0x2e98ea=_0x1a41;_0x1ee4b6['done']?_0x21f3c6(_0x1ee4b6['value']):_0x370e68(_0x1ee4b6[_0x2e98ea(0x140)])['then'](_0x4933b5,_0x298a46);}_0x2b7d47((_0x11b55b=_0x11b55b[_0xfa7607(0xfc)](_0x4393f8,_0xf71a9a||[]))['next']());});},__importDefault=this&&this[_0x32fbaa(0x135)]||function(_0x29bb7f){const _0x380391=_0x32fbaa;return _0x29bb7f&&_0x29bb7f[_0x380391(0xe5)]?_0x29bb7f:{'default':_0x29bb7f};};function _0x1a41(_0x10d956,_0x39efe3){const _0x2098c2=_0x2098();return _0x1a41=function(_0x1a41ce,_0xaabc4a){_0x1a41ce=_0x1a41ce-0xce;let _0x1ee4db=_0x2098c2[_0x1a41ce];return _0x1ee4db;},_0x1a41(_0x10d956,_0x39efe3);}Object[_0x32fbaa(0xf8)](exports,_0x32fbaa(0xe5),{'value':!![]});const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),uuid_1=require(_0x32fbaa(0x134)),moment_timezone_1=__importDefault(require('moment-timezone')),sequelize_1=require(_0x32fbaa(0xd1)),diskusage_1=__importDefault(require(_0x32fbaa(0xd4))),public_ip_1=require('public-ip'),node_fetch_1=__importDefault(require(_0x32fbaa(0xea))),mime_1=__importDefault(require(_0x32fbaa(0xd8)));class Storage{['detectPublicIP'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5a79da=_0x1a41;try{const _0x32341c=yield(0x0,public_ip_1[_0x5a79da(0x116)])();console[_0x5a79da(0x14b)]({'ip':_0x32341c}),_0x32341c!==process[_0x5a79da(0x10a)][_0x5a79da(0x130)]&&(console[_0x5a79da(0xfb)](_0x5a79da(0xe6)),process[_0x5a79da(0x115)]('Illegal\x20IP\x20address\x20detected'));}catch(_0x6e8158){console[_0x5a79da(0xfb)](_0x6e8158),process[_0x5a79da(0x115)](0x1);}});}constructor({database:_0x550d84,session:_0x24cd97,user:_0x354f23}){const _0x5beb7c=_0x32fbaa;this['database']=_0x550d84,this[_0x5beb7c(0xd6)]=_0x24cd97,this[_0x5beb7c(0xe9)]=_0x354f23,this[_0x5beb7c(0x12c)]=path_1[_0x5beb7c(0x11f)][_0x5beb7c(0x109)](_0x5beb7c(0x145)),!fs_1[_0x5beb7c(0x11f)][_0x5beb7c(0xe2)](this[_0x5beb7c(0x12c)])&&fs_1[_0x5beb7c(0x11f)][_0x5beb7c(0xeb)](this['localDirectory']),this['detectPublicIP']();}[_0x32fbaa(0xdd)](_0x1f8569){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x58a0e2=_0x1a41,_0x147b7c=yield this[_0x58a0e2(0x13a)][_0x58a0e2(0x100)][_0x58a0e2(0x102)]({'where':{'alias':_0x1f8569}});if(!_0x147b7c)throw new Error(_0x58a0e2(0x131)+_0x1f8569);return path_1[_0x58a0e2(0x11f)][_0x58a0e2(0x150)](path_1[_0x58a0e2(0x11f)]['join'](this[_0x58a0e2(0x12c)],_0x1f8569));});}['gdriveDownload'](_0x4257f1){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xe6f51b=_0x1a41;var _0x135b16;const _0x45ad7b=/https:\/\/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/,_0x40d9c2=_0x4257f1[_0xe6f51b(0x14c)](_0x45ad7b);if(_0x40d9c2&&_0x40d9c2[0x1]){let _0x360fb9=_0xe6f51b(0x13d)+_0x40d9c2[0x1],_0x5160cf=yield(0x0,node_fetch_1['default'])(_0x360fb9);if(!_0x5160cf['ok'])throw new Error(_0xe6f51b(0x127)+_0x5160cf[_0xe6f51b(0x112)]);if((_0x135b16=_0x5160cf[_0xe6f51b(0x12f)]['get'](_0xe6f51b(0xd7)))===null||_0x135b16===void 0x0?void 0x0:_0x135b16['includes'](_0xe6f51b(0xe0))){const _0x1b13a8=yield _0x5160cf[_0xe6f51b(0x11a)](),_0x434fd4=_0x1b13a8[_0xe6f51b(0x14c)](/confirm=([0-9A-Za-z_]+)&/);console[_0xe6f51b(0x14b)](_0x1b13a8);if(_0x434fd4&&_0x434fd4[0x1]){const _0xb28daf=_0x434fd4[0x1];_0x360fb9=_0x360fb9+_0xe6f51b(0xda)+_0xb28daf,_0x5160cf=yield(0x0,node_fetch_1[_0xe6f51b(0x11f)])(_0x360fb9);}else{const _0x515c5e=_0x1b13a8['match'](/<form.+?action="([^"]+)"/);if(_0x515c5e&&_0x515c5e[0x1]){const _0x297726=_0x515c5e[0x1],_0x4177b7=_0x1b13a8['match'](/<input.+?name="uuid".+?value="([^"]+)"/),_0xaaa4a9=_0x1b13a8[_0xe6f51b(0x14c)](/<input.+?name="confirm".+?value="([^"]+)"/);if(_0x4177b7&&_0xaaa4a9){const _0x1d0f7f=_0x4177b7[0x1],_0x11df7a=_0xaaa4a9[0x1];_0x360fb9=_0xe6f51b(0x10d)+_0x40d9c2[0x1]+_0xe6f51b(0xda)+_0x11df7a+_0xe6f51b(0x14d)+_0x1d0f7f,_0x5160cf=yield(0x0,node_fetch_1[_0xe6f51b(0x11f)])(_0x360fb9);}}}}const _0x228eaa=_0x5160cf['headers'][_0xe6f51b(0x10f)](_0xe6f51b(0x118));let _0xf50208='default_filename.mp4';if(_0x228eaa&&_0x228eaa[_0xe6f51b(0xf4)](_0xe6f51b(0x123))!==-0x1){const _0x7fe720=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,_0xcfafc3=_0x7fe720['exec'](_0x228eaa);if(_0xcfafc3!=null&&_0xcfafc3[0x1])_0xf50208=_0xcfafc3[0x1][_0xe6f51b(0xe1)](/['"]/g,'');}const _0x2d6317=(0x0,uuid_1['v4'])(),_0x5e4125=path_1['default']['join'](this[_0xe6f51b(0x12c)]);!fs_1['default']['existsSync'](_0x5e4125)&&fs_1[_0xe6f51b(0x11f)]['mkdirSync'](_0x5e4125);const _0x516333=_0x5160cf[_0xe6f51b(0x12f)][_0xe6f51b(0x10f)]('content-length'),_0x2baa25=_0x516333?parseInt(_0x516333,0xa):0x0;if(_0x2baa25===0x0)throw new Error('Gagal\x20mengunduh\x20file,\x20ukuran\x20file\x20tidak\x20valid');const _0x49084d=yield this[_0xe6f51b(0x114)]();if(_0x49084d['used']+_0x2baa25>_0x49084d[_0xe6f51b(0x13c)])throw new Error('Gagal\x20mengunduh\x20file,\x20penyimpanan\x20Anda\x20tidak\x20cukup');const _0x402fff=fs_1['default']['createWriteStream'](path_1[_0xe6f51b(0x11f)][_0xe6f51b(0x109)](_0x5e4125,_0x2d6317));yield new Promise((_0x2c9b42,_0x4ea302)=>{const _0x25c769=_0xe6f51b;var _0x2414f5,_0x4a0fc8;(_0x2414f5=_0x5160cf[_0x25c769(0x143)])===null||_0x2414f5===void 0x0?void 0x0:_0x2414f5['pipe'](_0x402fff),(_0x4a0fc8=_0x5160cf['body'])===null||_0x4a0fc8===void 0x0?void 0x0:_0x4a0fc8['on'](_0x25c769(0xfb),_0x4ea302),_0x402fff['on']('finish',_0x2c9b42);}),yield this['database'][_0xe6f51b(0x100)][_0xe6f51b(0x103)]({'originalName':_0xf50208,'bytesSize':_0x2baa25,'created':(0x0,moment_timezone_1['default'])()['tz'](_0xe6f51b(0x149))[_0xe6f51b(0x120)](),'userId':0x0,'userEmail':_0xe6f51b(0xff),'mimeType':mime_1[_0xe6f51b(0x11f)][_0xe6f51b(0xcf)](path_1[_0xe6f51b(0x11f)][_0xe6f51b(0x109)](_0x5e4125,_0x2d6317)),'alias':_0x2d6317,'aliasShare':null,'publicAccess':![]});}else throw new Error('Invalid\x20url');});}[_0x32fbaa(0x146)](_0x41d247){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x250e14=_0x1a41,_0x25703f=yield this[_0x250e14(0x114)]();if(_0x25703f[_0x250e14(0x12d)]+_0x41d247[_0x250e14(0x141)]>_0x25703f[_0x250e14(0x13c)])throw new Error(_0x250e14(0xce));const _0x4e5530=(0x0,uuid_1['v4'])(),_0x464844=path_1[_0x250e14(0x11f)]['join'](this[_0x250e14(0x12c)]);!fs_1[_0x250e14(0x11f)][_0x250e14(0xe2)](_0x464844)&&fs_1[_0x250e14(0x11f)][_0x250e14(0xeb)](_0x464844);const _0x47e670=path_1[_0x250e14(0x11f)][_0x250e14(0x109)](_0x464844,_0x4e5530);fs_1['default'][_0x250e14(0x11c)](_0x47e670,_0x41d247[_0x250e14(0x14a)]);const _0x12187e=(0x0,moment_timezone_1[_0x250e14(0x11f)])()['tz'](_0x250e14(0x149))[_0x250e14(0x120)]();yield this[_0x250e14(0x13a)][_0x250e14(0x100)]['create']({'originalName':_0x41d247[_0x250e14(0x119)],'bytesSize':_0x41d247[_0x250e14(0x141)],'created':_0x12187e,'userId':0x0,'userEmail':_0x250e14(0xff),'mimeType':_0x41d247['mimetype'],'alias':_0x4e5530,'aliasShare':null,'publicAccess':![]});});}[_0x32fbaa(0x12b)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3b96a9=_0x1a41,_0x3582e8=yield diskusage_1['default'][_0x3b96a9(0x11e)](this[_0x3b96a9(0x12c)]);return _0x3582e8['total']-0x280000000;});}['setLimit'](_0x412dc3,_0x4a2aa5){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x37d67c=_0x1a41,_0x124b28=yield this[_0x37d67c(0x13a)][_0x37d67c(0x137)][_0x37d67c(0x142)]({'where':{'userId':_0x412dc3}});_0x124b28<0x1?yield this[_0x37d67c(0x13a)]['userLimitStorage'][_0x37d67c(0x103)]({'userId':_0x412dc3,'bytesLimit':_0x4a2aa5*0xf4240}):yield this[_0x37d67c(0x13a)][_0x37d67c(0x137)]['update']({'bytesLimit':_0x4a2aa5*0xf4240},{'where':{'userId':_0x412dc3}});});}[_0x32fbaa(0x114)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x47479e=_0x1a41,_0x2319d4=path_1[_0x47479e(0x11f)][_0x47479e(0x109)](this[_0x47479e(0x12c)]);!fs_1[_0x47479e(0x11f)][_0x47479e(0xe2)](_0x2319d4)&&fs_1[_0x47479e(0x11f)][_0x47479e(0xeb)](_0x2319d4);const _0x30f48f=yield this[_0x47479e(0x12b)]();let _0x150c91=0x0;for(const _0xd4071b of fs_1[_0x47479e(0x11f)][_0x47479e(0xf1)](_0x2319d4)['map'](_0x24b640=>path_1[_0x47479e(0x11f)][_0x47479e(0x109)](_0x2319d4,_0x24b640))){const _0x5ca714=fs_1[_0x47479e(0x11f)][_0x47479e(0xf0)](_0xd4071b);_0x150c91+=_0x5ca714[_0x47479e(0x141)];}return{'used':_0x150c91,'limit':_0x30f48f,'usedPercentage':Math[_0x47479e(0x132)](_0x150c91/_0x30f48f*0x64)};});}[_0x32fbaa(0x100)](_0x543203,_0x2c26d2,_0x26d5f2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x13336c=_0x1a41;let _0x2f48f3=[];const _0x51f904=0x1e,_0x45b60c=yield this['database']['files'][_0x13336c(0xef)]({'where':{[sequelize_1['Op'][_0x13336c(0x101)]]:[sequelize_1[_0x13336c(0xe8)]['where'](sequelize_1['Sequelize']['fn'](_0x13336c(0xd9),sequelize_1[_0x13336c(0xe8)]['col'](_0x13336c(0x11b))),{[sequelize_1['Op'][_0x13336c(0xee)]]:'%'+_0x543203[_0x13336c(0xed)]()[_0x13336c(0xe7)]()+'%'})],'folder':_0x26d5f2},'limit':_0x51f904,'offset':_0x2c26d2*_0x51f904,'order':[[_0x13336c(0x144),_0x13336c(0x12e)]]});for(const _0x428653 of _0x45b60c){_0x2f48f3[_0x13336c(0x14f)]({'alias':_0x428653[_0x13336c(0x133)],'originalName':_0x428653[_0x13336c(0x11b)],'size':_0x428653['bytesSize'],'mimeType':_0x428653[_0x13336c(0x12a)],'folder':_0x428653[_0x13336c(0x117)],'aliasShare':_0x428653['aliasShare'],'publicAccess':_0x428653[_0x13336c(0xe3)],'created':_0x428653[_0x13336c(0x144)]});}return _0x2f48f3;});}['preview'](_0xc131ec){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2564ee=_0x1a41,_0x1f3fa9=yield this[_0x2564ee(0x13a)][_0x2564ee(0x100)][_0x2564ee(0x102)]({'where':{'alias':_0xc131ec}});if(!_0x1f3fa9)throw new Error(_0x2564ee(0xde));const _0x1af9ec=path_1[_0x2564ee(0x11f)][_0x2564ee(0x109)](this[_0x2564ee(0x12c)],_0x1f3fa9[_0x2564ee(0x133)]);if(!fs_1[_0x2564ee(0x11f)]['existsSync'](_0x1af9ec))throw new Error(_0x2564ee(0xf7));return{'buffer':fs_1['default'][_0x2564ee(0xdc)](_0x1af9ec),'filename':_0x1f3fa9[_0x2564ee(0x11b)],'mimeType':_0x1f3fa9['mimeType']};});}[_0x32fbaa(0xe4)](_0x3b3649){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x55dbcd=_0x1a41,_0x4a68aa=yield this[_0x55dbcd(0x13a)][_0x55dbcd(0x100)][_0x55dbcd(0x102)]({'where':{'alias':_0x3b3649}});if(!_0x4a68aa)throw new Error('404_FILE_NOT_FOUND');const _0x281fbf=path_1[_0x55dbcd(0x11f)][_0x55dbcd(0x109)](this['localDirectory'],_0x3b3649);if(!fs_1[_0x55dbcd(0x11f)]['existsSync'](_0x281fbf))throw new Error(_0x55dbcd(0xf7));return{'buffer':fs_1['default'][_0x55dbcd(0xdc)](_0x281fbf),'filename':_0x4a68aa['originalName'],'mimeType':_0x4a68aa['mimeType']};});}[_0x32fbaa(0xfd)](_0x52b8d1,_0x372729){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4108c6=_0x1a41,_0x2482f3=yield this[_0x4108c6(0x13a)][_0x4108c6(0x100)]['findOne']({'where':{'alias':_0x52b8d1}});if(!_0x2482f3)throw new Error('File\x20not\x20found');return{'filename':_0x2482f3[_0x4108c6(0x11b)],'alias':_0x2482f3[_0x4108c6(0x133)],'aliasShare':_0x2482f3['aliasShare'],'publicAccess':_0x2482f3['publicAccess']};});}[_0x32fbaa(0xfe)](_0xa3ce04,_0x174a91,_0x3a2992){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2a10b4=_0x1a41,_0x3b7022=btoa((0x0,uuid_1['v4'])());yield this[_0x2a10b4(0x13a)][_0x2a10b4(0x100)][_0x2a10b4(0x125)]({'publicAccess':_0x3a2992,'aliasShare':_0x3a2992?_0x3b7022:null},{'where':{'alias':_0xa3ce04}});});}['dl'](_0x51308b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x306c38=_0x1a41,_0x51bcae=yield this['database']['files']['findOne']({'where':{'aliasShare':_0x51308b}});if(!_0x51bcae)throw new Error(_0x306c38(0xde));const _0x4fa0ec=path_1[_0x306c38(0x11f)][_0x306c38(0x109)](this[_0x306c38(0x12c)],_0x51bcae['alias']);if(!fs_1[_0x306c38(0x11f)][_0x306c38(0xe2)](_0x4fa0ec))throw new Error(_0x306c38(0xdb));return{'filename':_0x51bcae[_0x306c38(0x11b)],'buffer':fs_1[_0x306c38(0x11f)]['readFileSync'](_0x4fa0ec),'mimeType':_0x51bcae['mimeType']};});}[_0x32fbaa(0x11d)](_0x1bad43){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3a10a7=_0x1a41,_0x3599d0=yield this['database'][_0x3a10a7(0x100)][_0x3a10a7(0x102)]({'where':{'alias':_0x1bad43}});if(!_0x3599d0)throw new Error(_0x3a10a7(0xde));return{'filename':{'original':_0x3599d0[_0x3a10a7(0x11b)]},'size':_0x3599d0[_0x3a10a7(0x10c)],'uploaded':_0x3599d0[_0x3a10a7(0x144)],'mimeType':_0x3599d0[_0x3a10a7(0x12a)],'alias':_0x1bad43,'aliasShare':_0x3599d0['aliasShare'],'folder':_0x3599d0['folder'],'publicAccess':_0x3599d0['publicAccess']};});}[_0x32fbaa(0xf9)](_0x263389,_0x5f063b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5b9d09=_0x1a41;yield this[_0x5b9d09(0x13a)][_0x5b9d09(0x100)][_0x5b9d09(0x125)]({'folder':_0x5f063b},{'where':{'alias':_0x263389}});});}['remove'](_0x463cef,_0x930a82){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x259dac=_0x1a41,_0x47f733=(yield this['database']['task']['findAll']({'attributes':[_0x259dac(0x122),'fileAliases']}))[_0x259dac(0xdf)](_0x1caf9c=>{const _0x186360=_0x259dac;return Object[_0x186360(0x111)](Object['assign']({},_0x1caf9c),{'fileAliases':JSON[_0x186360(0x138)](_0x1caf9c[_0x186360(0x147)])});});for(const _0x296805 of _0x463cef){let _0x1f429e=[];for(const _0x38ffe9 of _0x47f733){_0x38ffe9[_0x259dac(0x147)]['includes'](_0x296805)&&_0x1f429e[_0x259dac(0x14f)](_0x38ffe9[_0x259dac(0x104)][_0x259dac(0x122)]);}if(_0x1f429e[_0x259dac(0x10b)]>0x0){const _0x3503d2=yield this['fileInformation'](_0x296805);throw new Error('Gagal\x20menghapus\x20file\x20'+_0x3503d2[_0x259dac(0xf3)][_0x259dac(0xd5)]+'\x20karena\x20file\x20masih\x20digunakan\x20oleh\x20tugas:\x20'+_0x1f429e['join'](',\x20')+'.');}}for(const _0x475803 of _0x463cef){const _0x1df7eb=yield this[_0x259dac(0x13a)][_0x259dac(0x100)]['findOne']({'where':{'alias':_0x475803},'attributes':[_0x259dac(0xfa),_0x259dac(0x107)]});if(!_0x1df7eb)continue;const _0x4d6475=path_1[_0x259dac(0x11f)][_0x259dac(0x109)](this['localDirectory'],_0x475803);fs_1[_0x259dac(0x11f)][_0x259dac(0xe2)](_0x4d6475)&&fs_1['default'][_0x259dac(0x110)](_0x4d6475),yield this[_0x259dac(0x13a)][_0x259dac(0x100)][_0x259dac(0xf2)]({'where':{'alias':_0x475803}});}});}[_0x32fbaa(0x124)](_0xf147c2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5938c4=_0x1a41,_0x2bbc22=yield this[_0x5938c4(0x13a)]['files'][_0x5938c4(0x142)]({'where':{'alias':_0xf147c2}});return _0x2bbc22>0x0;});}[_0x32fbaa(0x139)](_0x28ec0a){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x957bfb=_0x1a41;let _0x5ae05e=[];const _0x3d0bee=yield this[_0x957bfb(0x13a)]['files'][_0x957bfb(0xef)]({'where':{'alias':{[sequelize_1['Op']['in']]:_0x28ec0a}},'attributes':['originalName']});for(const _0x8fa9f6 of _0x3d0bee){_0x5ae05e['push'](_0x8fa9f6['originalName']);}return _0x5ae05e;});}[_0x32fbaa(0xf6)](_0x277bab){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xda4452=_0x1a41,_0x52047c=yield this[_0xda4452(0x13a)][_0xda4452(0x100)][_0xda4452(0xef)]({'where':{'folder':_0xda4452(0x136)},'attributes':[_0xda4452(0x133)]});yield this['remove'](_0x52047c[_0xda4452(0xdf)](_0x451368=>_0x451368[_0xda4452(0x133)]),_0x277bab);});}[_0x32fbaa(0xd3)](_0x164370,_0x5eaa3e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xb19ec6=_0x1a41;let _0x1b6041=[];const _0x267d76=yield this[_0xb19ec6(0x13a)][_0xb19ec6(0x100)]['findAll']({'where':{'mimeType':{[sequelize_1['Op']['in']]:_0x164370},'folder':_0x5eaa3e},'order':[['id','DESC']]});for(const _0x23b7e0 of _0x267d76){_0x1b6041[_0xb19ec6(0x14f)]({'alias':_0x23b7e0['alias'],'originalName':_0x23b7e0[_0xb19ec6(0x11b)],'size':_0x23b7e0[_0xb19ec6(0x10c)],'mimeType':_0x23b7e0[_0xb19ec6(0x12a)],'folder':_0x23b7e0[_0xb19ec6(0x117)],'aliasShare':_0x23b7e0[_0xb19ec6(0x10e)],'publicAccess':_0x23b7e0['publicAccess'],'created':_0x23b7e0[_0xb19ec6(0x144)]});}return _0x1b6041;});}[_0x32fbaa(0xf5)](_0x524550){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2c2d93=_0x1a41,_0x297d01=yield this['database']['task'][_0x2c2d93(0xef)]({'attributes':[_0x2c2d93(0x122),'fileAliases']});let _0x41d4d9=[];for(const _0x109f0b of _0x297d01){const _0x278cb4=JSON['parse'](_0x109f0b[_0x2c2d93(0x147)]);_0x524550[_0x2c2d93(0x106)](_0x524550)&&_0x41d4d9['push'](_0x109f0b[_0x2c2d93(0x122)]);}return _0x41d4d9;});}}function _0x2098(){const _0xdabb64=['size','count','body','created','./streampeg-files','uploadFile','fileAliases','next','Asia/Jakarta','buffer','log','match','&uuid=','__awaiter','push','resolve','639oPfOox','Gagal\x20mengupload\x20file,\x20penyimpanan\x20Anda\x20tidak\x20cukup','lookup','throw','sequelize','682864uGgjMP','typedFiles','diskusage','original','session','content-type','mime','LOWER','&confirm=','404_LOCAL_FILE_NOT_EXISTS','readFileSync','absPath','404_FILE_NOT_FOUND','map','text/html','replace','existsSync','publicAccess','download','__esModule','Illegal\x20IP\x20address\x20detected','toLowerCase','Sequelize','user','node-fetch','mkdirSync','85696qvSlXQ','trim','like','findAll','statSync','readdirSync','destroy','filename','indexOf','usedTasksByFile','emptyTrash','404_LOCAL_FILE_NOT_AVAILABLE','defineProperty','changeFolder','userId','error','apply','shareDetail','changePublicAccess','root','files','and','findOne','create','dataValues','26543cdDFhy','includes','userEmail','64958dYifCF','join','env','length','bytesSize','https://drive.usercontent.google.com/download?id=','aliasShare','get','unlinkSync','assign','status','6505lvpWNI','stats','exit','publicIpv4','folder','content-disposition','originalname','text','originalName','writeFileSync','fileInformation','check','default','unix','40xNgTcI','name','attachment','exists','update','13kOydmb','Gagal\x20mengunduh\x20file,\x20server\x20google\x20drive\x20mengembalikan\x20kode\x20kesalahan:\x20','23152zVSpai','5172dwWARl','mimeType','getLimit','localDirectory','used','DESC','headers','PUBLIC_IP','File\x20was\x20not\x20found\x20with\x20alias:\x20','round','alias','uuid','__importDefault','trash','userLimitStorage','parse','getFileNames','database','3462WmzPAN','limit','https://drive.google.com/uc?export=download&id=','115077RaTLdw','1570vRtUPo','value'];_0x2098=function(){return _0xdabb64;};return _0x2098();}exports[_0x32fbaa(0x11f)]=Storage;