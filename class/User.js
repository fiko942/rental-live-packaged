'use strict';const _0xd28611=_0x3be7;function _0x3be7(_0x2e0887,_0x3b7ac1){const _0x3bc2af=_0x3bc2();return _0x3be7=function(_0x3be7df,_0x5c7070){_0x3be7df=_0x3be7df-0x190;let _0x296610=_0x3bc2af[_0x3be7df];return _0x296610;},_0x3be7(_0x2e0887,_0x3b7ac1);}function _0x3bc2(){const _0x34bf80=['\x20was\x20not\x20found!','sent','password','DESC','User\x20with\x20id\x20','name','132bXHdom','1729123RHJVyz','50MhDmbb','25098SlRuwb','database','__importDefault','randomUUID','&h=','733275nvEevC','user','profile','Akun\x20sudah\x20terverifikasi','count','detail','exists','1931192YJbhUq','Kirim\x20ulang\x20link\x20verifikasi\x20hanya\x20berlaku\x201\x20menit\x20setelah\x20kode\x20terkirim\x20ke\x20email\x20anda,\x20silahkan\x20coba\x20lagi\x20beberapa\x20saat','value','45WDYEaN','534LsfFYm','crypto','isDeveloper','throw','banned','created','509833ASxZFX','email','next','done','Asia/Jakarta','emailVerificationCode','/auth/emailVerification?c=','alias','__awaiter','26740Uwurdf','findOne','session','4mCRmXe','unix','isBanned','1801805XynABH','emailVerified','Akun\x20tidak\x20ditemukan:\x20','create','default','timezone','balance'];_0x3bc2=function(){return _0x34bf80;};return _0x3bc2();}(function(_0x3b892e,_0x276953){const _0xf46e44=_0x3be7,_0x333722=_0x3b892e();while(!![]){try{const _0x137207=parseInt(_0xf46e44(0x1bb))/0x1+-parseInt(_0xf46e44(0x1a5))/0x2*(-parseInt(_0xf46e44(0x1b4))/0x3)+-parseInt(_0xf46e44(0x192))/0x4*(-parseInt(_0xf46e44(0x195))/0x5)+-parseInt(_0xf46e44(0x1b5))/0x6*(-parseInt(_0xf46e44(0x1c4))/0x7)+parseInt(_0xf46e44(0x1b1))/0x8+-parseInt(_0xf46e44(0x1aa))/0x9*(-parseInt(_0xf46e44(0x1a4))/0xa)+-parseInt(_0xf46e44(0x1a3))/0xb*(parseInt(_0xf46e44(0x1a2))/0xc);if(_0x137207===_0x276953)break;else _0x333722['push'](_0x333722['shift']());}catch(_0x124479){_0x333722['push'](_0x333722['shift']());}}}(_0x3bc2,0x4da6c));var __awaiter=this&&this[_0xd28611(0x1c3)]||function(_0x38449e,_0x5f14a1,_0x496d35,_0x243b53){function _0x1638c2(_0x5f5c6d){return _0x5f5c6d instanceof _0x496d35?_0x5f5c6d:new _0x496d35(function(_0x2e74f3){_0x2e74f3(_0x5f5c6d);});}return new(_0x496d35||(_0x496d35=Promise))(function(_0x43628a,_0x499bbd){const _0x47030c=_0x3be7;function _0x54657b(_0x30e948){const _0x362d11=_0x3be7;try{_0x3e6756(_0x243b53[_0x362d11(0x1bd)](_0x30e948));}catch(_0x3c47d1){_0x499bbd(_0x3c47d1);}}function _0x45ae2e(_0x319a93){const _0x39c908=_0x3be7;try{_0x3e6756(_0x243b53[_0x39c908(0x1b8)](_0x319a93));}catch(_0x28eeec){_0x499bbd(_0x28eeec);}}function _0x3e6756(_0x527f44){const _0x2f43f5=_0x3be7;_0x527f44[_0x2f43f5(0x1be)]?_0x43628a(_0x527f44[_0x2f43f5(0x1b3)]):_0x1638c2(_0x527f44[_0x2f43f5(0x1b3)])['then'](_0x54657b,_0x45ae2e);}_0x3e6756((_0x243b53=_0x243b53['apply'](_0x38449e,_0x5f14a1||[]))[_0x47030c(0x1bd)]());});},__importDefault=this&&this[_0xd28611(0x1a7)]||function(_0x2e18c3){return _0x2e18c3&&_0x2e18c3['__esModule']?_0x2e18c3:{'default':_0x2e18c3};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const moment_timezone_1=__importDefault(require('moment-timezone')),crypto_1=__importDefault(require(_0xd28611(0x1b6)));class User{constructor({database:_0x33ea00,email:_0x2c93db,session:_0x30109b}){const _0x17ac18=_0xd28611;this['database']=_0x33ea00,this[_0x17ac18(0x1bc)]=_0x2c93db,this[_0x17ac18(0x191)]=_0x30109b;}['isDeveloper'](_0x4b063c){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x25467c=_0x3be7,_0x20ca8f=yield this[_0x25467c(0x1a6)][_0x25467c(0x1ab)][_0x25467c(0x190)]({'where':{'id':_0x4b063c},'attributes':['isDeveloper']});if(!_0x20ca8f)throw new Error(_0x25467c(0x1a0)+_0x4b063c+_0x25467c(0x19c));return _0x20ca8f[_0x25467c(0x1b7)];});}[_0xd28611(0x1b0)](_0x4407e0,_0x49a86b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x34ed77=_0x3be7;if(_0x49a86b===_0x34ed77(0x1bc)){const _0x1f8501=yield this[_0x34ed77(0x1a6)][_0x34ed77(0x1ab)][_0x34ed77(0x1ae)]({'where':{'email':_0x4407e0}});return _0x1f8501>0x0;}const _0x59e3c4=yield this['database'][_0x34ed77(0x1ab)][_0x34ed77(0x1ae)]({'where':{'id':_0x4407e0}});return _0x59e3c4>0x0;});}[_0xd28611(0x194)](_0x3f898e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x28ae0c=_0x3be7,_0x280773=yield this[_0x28ae0c(0x1a6)]['user'][_0x28ae0c(0x190)]({'where':{'id':_0x3f898e},'attributes':[_0x28ae0c(0x1b9)]});return _0x280773[_0x28ae0c(0x1b9)];});}['sentMailVerification'](_0x283645){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x28b591=_0x3be7,_0x264769=yield this[_0x28b591(0x1af)](_0x283645,_0x28b591(0x1bc));if(_0x264769['banned'])throw new Error('Akun\x20dinonaktifkan');if(_0x264769['emailVerified'])throw new Error(_0x28b591(0x1ad));const _0x444d02=(0x0,moment_timezone_1[_0x28b591(0x199)])()['tz'](_0x28b591(0x1bf))[_0x28b591(0x193)](),_0x5ad25e=yield this[_0x28b591(0x1a6)][_0x28b591(0x1c0)][_0x28b591(0x190)]({'order':[[_0x28b591(0x1ba),_0x28b591(0x19f)]],'where':{'email':_0x264769[_0x28b591(0x1bc)]}});if(_0x5ad25e&&_0x5ad25e[_0x28b591(0x1ba)]+0x3c>_0x444d02)throw new Error(_0x28b591(0x1b2));const _0x430e97=crypto_1[_0x28b591(0x199)][_0x28b591(0x1a8)](),_0xa5923=process['env']['BACKEND_URL']+_0x28b591(0x1c1)+_0x444d02+_0x28b591(0x1a9)+_0x430e97,_0x42bf25='Verifikasi\x20akun\x20anda\x20menggunakan\x20link\x20dibawah\x20ini.\x0aPerlu\x20diperhatikan\x20bahwa\x20link\x20akan\x20expired\x2030\x20menit\x20setelah\x20pesan\x20ini\x20dikirim\x20dan\x20jangan\x20berikan\x20link\x20dibawah\x20kepada\x20siapapun,\x20Terimakasih\x20telah\x20bergabung\x20bersama\x20kami.\x0a\x0aLink\x20Verifikasi:\x20'+_0xa5923;yield this[_0x28b591(0x1bc)][_0x28b591(0x19d)](_0x264769[_0x28b591(0x1bc)],'Verifikasi\x20Akun\x20Anda',_0x42bf25),yield this['database'][_0x28b591(0x1c0)][_0x28b591(0x198)]({'email':_0x264769[_0x28b591(0x1bc)],'created':_0x444d02,'expired':_0x444d02+0x708,'hash':_0x430e97});});}['detail'](_0x37af7d,_0x4aeec2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3bb66b=_0x3be7,_0x421adb=_0x4aeec2==='email'?{'email':_0x37af7d}:{'id':_0x37af7d},_0x24e64b=yield this[_0x3bb66b(0x1a6)][_0x3bb66b(0x1ab)]['findOne']({'where':_0x421adb});if(!_0x24e64b)throw new Error(_0x3bb66b(0x197)+_0x37af7d);return{'id':_0x24e64b['id'],'email':_0x24e64b['email'],'emailVerified':_0x24e64b[_0x3bb66b(0x196)],'banned':_0x24e64b['banned'],'created':_0x24e64b['created'],'timezone':_0x24e64b[_0x3bb66b(0x19a)],'password':_0x24e64b[_0x3bb66b(0x19e)],'alias':_0x24e64b[_0x3bb66b(0x1c2)],'ip':_0x24e64b['ip'],'balance':_0x24e64b[_0x3bb66b(0x19b)],'isDeveloper':_0x24e64b[_0x3bb66b(0x1b7)],'name':_0x24e64b['name']};});}[_0xd28611(0x1ac)](_0x41cbf2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2c9c10=_0x3be7,_0x407db5=yield this[_0x2c9c10(0x191)][_0x2c9c10(0x1af)](_0x41cbf2),_0x408501=yield this['detail'](_0x407db5['id'],'id');return{'name':_0x408501[_0x2c9c10(0x1a1)],'email':_0x408501[_0x2c9c10(0x1bc)],'created':_0x408501[_0x2c9c10(0x1ba)],'balance':_0x408501[_0x2c9c10(0x19b)],'status':_0x408501[_0x2c9c10(0x1b7)]?0xfa4:0xfa3};});}}exports['default']=User;