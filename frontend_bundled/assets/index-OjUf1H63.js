import{r as p,e as A,_ as P,I as B,m as y,T as w,b as k,f as U,y as J,g as N}from"./index-Nr3L1iTT.js";import{n as h,K as E,L as F,J as V,o as j,I as q,p as o,q as i,a as r,D as v,F as b,s as e,H as l,z as d,w as M,y as n,M as L,x as T,N as Y}from"./index-Dgcy2TkH.js";import{I as g,m as R,a as G,b as Q,c as W}from"./ContactFloating-CjrjB1BS.js";import"./id-CC-feQMv.js";const X="/assets/empty-box-CylKkH42.png",Z={key:0,class:"w-fit mt-20 mx-auto"},ee=["src"],te=e("div",{class:"text-lg w-fit text-center mx-auto mt-2"},"Anda belum mempunyai tugas",-1),se=e("p",{class:"text-sm text-center"},"Buat tugas untuk memulainya",-1),ae={key:1,class:"flex max-w-[90%] mx-auto mt-2"},le={key:2,class:"tasks flex flex-wrap justify-center gap-2 mt-9 mb-9"},oe=["id"],ie={class:"head flex items-center gap-2"},ne={class:"title text-sm text-gray-800 max-w-full overflow-hidden text-ellipsis"},ce={class:"flex items-center gap-1 text-sm"},re=e("div",{class:"name text-gray-500"},"Jadwalkan:",-1),de={class:"value text-gray-800"},ue={class:"flex items-center gap-1 text-sm"},me=e("div",{class:"name text-gray-500"},"Jumlah Video:",-1),pe={class:"value text-gray-800"},he={class:"flex items-center gap-1 text-sm"},_e=e("div",{class:"name text-gray-500 whitespace-nowrap"},"Dibuat Pada:",-1),xe={class:"value text-gray-800 whitespace-nowrap"},ve={class:"flex items-center gap-1 text-sm"},ge=e("div",{class:"name text-gray-500"},"ID Proses:",-1),fe={class:"value text-gray-800"},ye={class:"flex items-center gap-1 text-sm"},we=e("div",{class:"name text-gray-500"},"Acak:",-1),be={class:"flex items-center gap-1 text-sm"},Ce=e("div",{class:"name text-gray-500"},"Infinite Loop:",-1),ke={class:"flex items-center gap-1 text-sm"},Me=e("div",{class:"name text-gray-500 whitespace-nowrap"},"Stream Key:",-1),Le={class:"value text-gray-800 max-w-72 text-ellipsis whitespace-nowrap overflow-hidden"},Te={class:"flex items-center gap-1 text-sm"},Ye=e("div",{class:"name text-gray-500 whitespace-nowrap"},"Platform:",-1),Ke={class:"value text-gray-800 max-w-72 text-ellipsis whitespace-nowrap gap-1 overflow-hidden flex items-center"},Se=["src"],$e={key:0,class:"font-bold text-gray-600 whitespace-nowrap max-w-full overflow-hidden text-ellipsis"},De={class:"flex items-center gap-1 text-sm"},He=e("div",{class:"name text-gray-500"},"Status:",-1),Ie={class:"value text-gray-800 flex items-center gap-1"},Oe={key:0},ze={class:"flex items-center gap-1 text-sm"},Ae=e("div",{class:"name text-gray-500"},"Creator:",-1),Pe={class:"value text-gray-800 flex text-xs items-center gap-1"},Be={class:"flex items-start gap-1 text-sm"},Ue=e("div",{class:"name text-gray-500"},"Files:",-1),Je={class:"value text-gray-800 flex text-xs items-center gap-1 ml-1"},Ne={style:{"list-style":"none"},class:"mt-[2px]"},Ee={class:"max-w-[170px] whitespace-nowrap overflow-hidden text-ellipsis"},Fe={class:"flex items-center gap-1 text-sm"},Ve=e("div",{class:"name text-gray-500"},"Auto Stop:",-1),je={class:"value text-gray-800 flex items-center gap-1"},qe={key:0,class:"actions w-fit ml-auto mr-0 gap-2 flex items-center"},Re={key:0},Ge={key:1},Qe=["disabled","onClick"],We=["disabled","onClick"],at={__name:"index",setup(Xe){const c=h([]),_=h(!1),K=()=>_.value=!1,f=h(!1),C=h(!1),x=h(""),u=E(V.api.base,{reconnectionDelay:5e3,auth:{session:F.get("session"),type:"task-list-page"},rejectUnauthorized:!1});j(()=>{S(),u.connect({rejectUnauthorized:!1}),u.on("all-items",a=>{c.value=a}),u.on("new-task",a=>c.value=[a,...c.value]),u.on("update-task",a=>{const s=c.value.findIndex(t=>t.alias===a.alias);s>=0&&(c.value[s]=a)})});const S=()=>{p("/user/isDeveloper").then(a=>{const{state:s}=a;C.value=s}).catch(()=>{})};q(()=>{try{u.disconnect()}catch(a){console.error(a.message||a)}});const $=a=>{p("/task/start","POST",{alias:a}).then(s=>{}).catch(s=>k.error(s.message?s.message:s)).finally(()=>f.value=!1)},D=a=>{p("/task/stop","POST",{alias:a}).catch(s=>console.error(s.message?s.message:s))},H=a=>{p("/task/restart","POST",{alias:a}).then(()=>{}).catch(s=>console.error(s.message?s.message:s))},I=a=>{window.confirm("Anda yakin ingin menghapus tugas ini?")&&p("/task/remove","POST",{alias:a}).then(()=>{c.value=c.value.filter(s=>s.alias!==a)}).catch(s=>{k.error(s.message?s.message:s)})},O=a=>a==="FACEBOOK"?U:a==="YOUTUBE"?J:N;return(a,s)=>(o(),i(b,null,[r(A,{open:_.value,onClosed:K},null,8,["open"]),r(P,null,{default:v(()=>[c.value.length<1?(o(),i("div",Z,[e("img",{src:l(X),alt:"Empty task",class:"w-60 ml-8"},null,8,ee),te,se,e("button",{class:"bg-black text-white mt-5 flex mx-auto px-3 py-1 rounded-lg shadow-xl hover:bg-gray-700",onClick:s[0]||(s[0]=()=>_.value=!0)}," Buat Tugas ")])):d("",!0),c.value.length>0?(o(),i("div",ae,[r(l(B),{class:"w-[250px] max-w-full",placeholder:"Cari",value:x.value,onChange:s[1]||(s[1]=t=>x.value=t.target.value)},null,8,["value"])])):d("",!0),c.value.length>0?(o(),i("div",le,[(o(!0),i(b,null,M(c.value.filter(t=>t.name.toLowerCase().includes(x.value.toLowerCase())||t.streamKey.toLowerCase().includes(x.value.toLowerCase())),t=>(o(),i("div",{key:t.alias,id:t.alias,class:"bg-white relative basis-1/2 lg:basis-1/4 xl:basis-1/5 p-4 rounded-2xl shadow-3xl hover:shadow-2xl duration-100 ease-in-out"},[e("div",ie,[r(l(g),{type:"mdi",path:l(G),class:"text-gray-800",size:18},null,8,["path"]),e("div",ne,n(t.name),1)]),r(l(L),{class:"mt-1.5 mb-1.5"}),e("ul",null,[e("li",null,[e("div",ce,[re,e("div",de,n(t.schedule.enabled?l(y)(t.schedule.time*1e3).tz("Asia/Jakarta").format("MMMM, D YYYY HH:mm"):"Tidak"),1)])]),e("li",null,[e("div",ue,[me,e("div",pe,n(t.file.aliases.length),1)])]),e("li",null,[e("div",he,[_e,e("div",xe,n(l(y)(t.created*1e3).tz("Asia/Jakarta").format("MMMM, D YYYY HH:mm")),1)])]),e("li",null,[e("div",ve,[ge,e("div",fe,n(t.pid||"-"),1)])]),e("li",null,[e("div",ye,[we,e("div",{class:T(`value text-${t.file.shuffle?"green":"red"}-800 bg-${t.file.shuffle?"green":"red"}-200 font-bold px-2 rounded-lg`)},n(t.file.shuffle?"Ya":"Tidak"),3)])]),e("li",null,[e("div",be,[Ce,e("div",{class:T(`value text-${t.infiniteLoop?"green":"red"}-800 bg-${t.infiniteLoop?"green":"red"}-200 font-bold px-2 rounded-lg`)},n(t.infiniteLoop?"Ya":"Tidak"),3)])]),e("li",null,[e("div",ke,[Me,e("div",Le,n(t.streamKey),1)])]),e("li",null,[e("div",Te,[Ye,e("div",Ke,[e("img",{src:O(t.platformKey),class:"w-4"},null,8,Se),t.platformKey==="CUSTOM"?(o(),i("div",$e,n(t.platformUrl),1)):d("",!0)])])]),e("li",null,[e("div",De,[He,e("div",Ie,[e("div",{class:"p-1 rounded-lg",style:Y(`background: ${t.status.color}`)},null,4),r(l(w),{title:t.status.message,arrow:!1},{default:v(()=>[e("div",{class:"font-semibold cursor-default hover:underline",style:Y(`color: ${t.status.color}`)},n(t.status.title),5)]),_:2},1032,["title"])])])]),C.value?(o(),i("li",Oe,[e("div",ze,[Ae,e("div",Pe,n(t.user.email)+" ("+n(t.user.id)+") ",1)])])):d("",!0),e("li",null,[e("div",Be,[Ue,e("div",Je,[e("ul",Ne,[(o(!0),i(b,null,M(t.file.names,(m,z)=>(o(),i("li",Ee,n(z+1)+". "+n(m),1))),256))])])])]),e("li",null,[e("div",Fe,[Ve,e("div",je,n(t.autoStopAt===null?"-":l(y)(t.autoStopAt*1e3).format("MMMM, D YYYY HH:mm")),1)])])]),r(l(L),{class:"mt-1.5 mb-1.5"}),t.statusKey!=="restarting"?(o(),i("div",qe,[t.statusKey==="stopped"?(o(),i("button",Re,[r(l(w),{title:"Hapus",arrow:!1},{default:v(()=>[r(l(g),{type:"mdi",path:l(Q),class:"text-gray-600",onClick:m=>I(t.alias)},null,8,["path","onClick"])]),_:2},1024)])):d("",!0),t.statusKey==="stopped"?(o(),i("button",Ge,[r(l(w),{title:"Resart",arrow:!1},{default:v(()=>[r(l(g),{type:"mdi",path:l(W),class:"text-gray-600",onClick:m=>H(t.alias)},null,8,["path","onClick"])]),_:2},1024)])):d("",!0),t.statusKey==="stopped"?(o(),i("button",{key:2,class:"px-3 py-1 rounded-lg bg-blue-500 text-white hover:bg-blue-400",disabled:f.value,onClick:m=>$(t.alias)}," Mulai ",8,Qe)):d("",!0),t.statusKey==="running"?(o(),i("button",{key:3,class:"px-3 py-1 rounded-lg bg-red-500 text-white hover:bg-red-400",disabled:f.value,onClick:m=>D(t.alias)}," Hentikan ",8,We)):d("",!0)])):d("",!0)],8,oe))),128))])):d("",!0),c.value.length>0?(o(),i("button",{key:3,class:"bg-blue-600 rounded-3xl p-2 text-white fixed bottom-4 right-4 shadow-3xl hover:bg-blue-500 z-20",onClick:s[2]||(s[2]=t=>_.value=!0)},[r(l(g),{type:"mdi",path:l(R)},null,8,["path"])])):d("",!0)]),_:1})],64))}};export{at as default};
